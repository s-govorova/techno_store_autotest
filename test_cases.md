# Набор тест-кейсов, покрывающих форму авторизации приложения "Techno Store".

**Test 1 — Регистрация нового пользователя**
**Предусловие:**  
Пользователь не зарегистрирован в приложении.
**Шаги:**
1. Открываем страницу авторизации http://localhost:8080/login.  
2. Кликаем кнопку "Не зарегистрированы?".  
3. Переходим на страницу регистрации http://localhost:8080/register.  
4. Заполняем поля: Email, Имя, Фамилия, Пароль.  
5. Нажимаем кнопку "Регистрация".
**Ожидаемый результат:**  
После нажатия кнопки "Регистрация" пользователь успешно создаётся,  
и происходит редирект на страницу авторизации (http://localhost:8080/login).


**Test 2 — Авторизация пользователя: валидные проверки**
**Предусловие:**  
Пользователь зарегистрирован в системе (email: user@mail.com, пароль: user).  
Открыть адрес http://localhost:8080.
**Шаги:**
1. Переходим на страницу авторизации.  
2. Вводим логин и пароль.  
3. Нажимаем кнопку "Войти".
**Ожидаемый результат (валидные данные):**  
Пользователь успешно входит в систему, выполняется редирект на страницу выбора товаров.  
На странице отображается название магазина — *techno store*.


**Test 3 — Авторизация пользователя: невалидные проверки**
**Предусловие:** 
Открыть адрес http://localhost:8080.
**Шаги (невалидные данные):**
1. Вводим почту и пароль незарегистрированного пользователя, нажимаем кнопку "Войти".  
2. Проверяем, что появляется сообщение об ошибке:  
   *Invalid email address or password, or this account does not exist.*  
3. Повторяем шаг с пустыми полями логина и пароля.
**Ожидаемый результат (невалидные данные):**  
Сообщение об ошибке одинаковое —  
*Invalid email address or password, or this account*


# Набор тест-кейсов, покрывающих фильтрацию товаров и добавление в корзину

**Test 4 — Фильтрация по категории "Camera"**
**Предусловия:**
Пользователь авторизован (user@mail.com / user)
**Шаги:**
1. Открыть главную страницу и кликнуть по фильтру категория
2. Выбрать в выпадающем списке категорию **"Camera"** > кликнуть Поиск!
3. Нажать кнопку **«На главную»**.
**Ожидаемый результат:**
При выборе категории Camera фильтр применяется корректно
После нажатия кнопки "На главную" происходит редирект на главную страницу товаров http://localhost:8080/index


**Test 5 - Поиск существующего товара по названию**
**Предусловия:**
Пользователь авторизован (user@mail.com / user)
**Шаги:**
1. Открыть главную страницу, в поле Запрос ввести название существующго товара: **Lenovo**
2. Кликнуть по кнопке Поиск!
3. Нажать кнопку **«На главную»**.
**Ожидаемый результат:**
На странице результатов фильтр применяется корректно, найдены товары с названием Lenovo
После нажатия «На главную» выполняется редирект на http://localhost:8080/index


**Test 6 - Поиск несуществующего товара по названию**
**Шаги:**
1. Открыть главную страницу, в поле **Запрос** ввести значение: **Books**
2. Кликнуть по кнопке **Поиск!**
3. Нажать кнопку **«На главную»**
**Ожидаемый результат:**
На странице результатов нет карточек товаров 
После нажатия «На главную» выполняется редирект на http://localhost:8080/index


**Test 7 - Добавление товара в корзину**
**Предусловия:**
Пользователь авторизован (user@mail.com / user)
На главной странице присутствует товар **"Apple iPhone 13 128 ГБ Black"**
**Шаги:**
1. На главной странице выбрать товар **"Apple iPhone 13 128 ГБ Black"**, кликнуть  **В корзину**
2. На главной странице кликнуть кнопку Корзина
**Ожидаемый результат:**
В корзине отображается именно тот товар, который был добавлен на главной (названия совпадают)


# Тест-кейс API

**Test 1 — Публичный эндпоинт /external/products/findAll**  
**Предусловие:**  
Авторизация не требуется
**Шаги:**  
1. Отправить GET запрос на http://localhost:8080/external/products/findAll
2. Проверить статус-код ответа
3. Привести тело ответа к формату JSON 
4. Проверить, что тип данных: list 
5. Проверить, что каждый объект в списке содержит поле title
**Ожидаемый результат:**  
Ответ возвращается со статус-кодом **200**
Тело ответа имеет тип **list**, каждый элемент содержит ключ **title**


# Интеграционный тест-кейс

**Test 1 — Проверка интеграции UI, REST, БД и Kafka при загрузке товаров из внешнего источника**
**Предусловие:**  
1. Приложение магазина запущено и открывается по адресу http://localhost:8080 
2. Kafka и Kafka UI запущены и доступны по адресу http://localhost:7777
3. Пользователь авторизован с правами админа
   учётные данные админа:  
   - **Email:** admin@mail.com
   - **Пароль:** admin
4. База данных активна и доступна по адресу http://localhost:8080/h2-console

**Шаги:**
1. Заходим на главную страницу http://localhost:8080/index, кликаем кнопку Админ-панель
2. В админ-панели нажать кнопку **«Загрузить продукты из внешнего источника»**.  
3. Открывается URL со списком товаров http://localhost:8080/external/products/findAll
4. Проверить, что товары из внешнего источника появились в БД: Отправляем SQL запрос SELECT * FROM PRODUCTS;
5. Проверить, что в Kafka UI (http://localhost:7777) во вкладке Topics, что в топике 
_shop_store.out_store.products_info_ появились сообщения с информацией о загруженных товарах.
6. Перейти на главную страницу магазина http://localhost:8080/index
и убедиться, что новые товары (товар 1, товар 2) отображаются в интерфейсе приложения.

**Ожидаемый результат:**
После нажатия кнопки «Загрузить продукты из внешнего источника»:
1)  получаем список товаров с эндпоинта /external/products/findAll
2) новые товары сохраняются в базе данных
3) информация о товарах отправляется в Kafka-топик shop_store.out_store.products_info
4) на главной странице магазина отображаются загруженные товары

**Фактический результат:**
После загрузки товаров из внешнего источника:
1) товары корректно сохраняются в базе данных и отображаются в UI
2)  **Kafka-топиках сообщений нет — контроллер ProductRestController
не вызывает продюсер ProductProducer, из-за чего интеграция Kafka не срабатывает**
